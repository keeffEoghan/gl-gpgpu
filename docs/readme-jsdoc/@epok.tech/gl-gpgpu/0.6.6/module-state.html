<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: state</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: state</h1>

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">GPGPU state and GL resources: framebuffers, textures; and meta information.</div>
        

        
            















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="state.js.html">state.js</a>, <a href="state.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>Allow passes into or across textures; separate data and texture shapes.</li>
        
            <li>In-place updates of complex resources and meta info.</li>
        </ul>
    </dd>
    
</dl>




















        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id=".default"><span class="type-signature">(static) </span>default<span class="signature">()</span><span class="type-signature"></span></h4>
    

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="state.js.html">state.js</a>, <a href="state.js.html#line538">line 538</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="module-state.html#.getState">module:state.getState</a></li>
        </ul>
    </dd>
    

    
</dl>




















        
            

    

    
    <h4 class="name" id=".getState"><span class="type-signature">(static) </span>getState<span class="signature">(api, state<span class="signature-attributes">opt</span>, to<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object|object.&lt;number, array.&lt;number, array.&lt;number>>>|array.&lt;array.&lt;object.&lt;texture, string, number, array.&lt;number>>>>|array.&lt;array.&lt;object.&lt;framebuffer, number, array.&lt;number>>>>|array.&lt;framebuffer.&lt;array.&lt;texture>>>|undefined|*|object.&lt;texture, string, number, array.&lt;number>>|object|string|boolean|boolean|number|number|number|number|number|number|number|number|array.&lt;number>|number|undefined|object.&lt;number, string, array.&lt;number>>|number|number}</span></h4>
    

    



<div class="description">
    Set up the GPGPU resources and meta information for a state of a number data.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>api</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The API for GL resources.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>texture</code></td>
            

            <td class="type">
            
                
<span class="param-type">texture</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Function to create a GL texture.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>framebuffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">framebuffer</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Function to create a GL framebuffer.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    {}
                
                </td>
            

            <td class="description last">The state parameters.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>width</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    widthDef
                
                </td>
            

            <td class="description last">Data width, aliases follow in order
  of precedence. See `getWidth`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>w</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Alias of `state.width`. See `getWidth`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Alias of `state.width`. See `getWidth`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>height</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    heightDef
                
                </td>
            

            <td class="description last">Data height, aliases follow in order
  of precedence. See `getHeight`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>h</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Alias of `state.height`. See `getHeight`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Alias of `state.height`. See `getHeight`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>shape</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Data size. See `getWidth` and `getHeight`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>size</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Data size. See `getWidth` and `getHeight`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>side</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Data size of width/height.
  See `getWidth` and `getHeight`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>0</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Alias of `state.width` (index 0). See `getWidth`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>1</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Alias of `state.height` (index 1). See `getHeight`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>scale</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    scaleDef
                
                </td>
            

            <td class="description last">Data size of width/height as a square
  power-of-two size, 2 raised to this power. See `getScaled`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>steps</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">array</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    stepsDef
                
                </td>
            

            <td class="description last">How many steps of state to
  track, or the list of states if already set up.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>maps</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">How `state.maps.values` are grouped per-texture
  per-pass per-step. See `mapGroups`.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>values</code></td>
            

            <td class="type">
            
                
<span class="param-type">array.&lt;number></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    valuesDef()
                
                </td>
            

            <td class="description last">How values of each
  data item may be grouped into textures across passes; set up here if not
  given. See `mapGroups`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>channelsMin</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    channelsMinDef
                
                </td>
            

            <td class="description last">The minimum allowed
  channels for framebuffer attachments; allocates unused channels as needed
  to reach this limit.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>textures</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">How values are grouped into textures.
  See `mapGroups`.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stepNow</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The currently active state step, if any.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>passNow</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The currently active draw pass, if any.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    typeDef
                
                </td>
            

            <td class="description last">Texture data type.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>min</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    minDef
                
                </td>
            

            <td class="description last">Texture minification filter.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>mag</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    magDef
                
                </td>
            

            <td class="description last">Texture magnification filter.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>wrap</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    wrapDef
                
                </td>
            

            <td class="description last">Texture wrap mode.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>depth</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>
|

<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    depthDef
                
                </td>
            

            <td class="description last">Framebuffer depth attachment.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stencil</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>
|

<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    stencilDef
                
                </td>
            

            <td class="description last">Framebuffer stencil attachment.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>merge</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>
|

<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    mergeDef
                
                </td>
            

            <td class="description last">Whether to merge states into one
  texture; `true` handles merging here; any other truthy is used as-is (the
  merged texture already set up); falsey uses un-merged arrays of textures.
  Merging allows shaders to access past steps by non-constant lookups; e.g:
  attributes cause "sampler array index must be a literal expression" on
  GLSL3 spec and some platforms (e.g: D3D); but takes more work to copy the
  last pass's bound texture/s to merge into the past texture, so should be
  used to variably access past steps or avoid arrays of textures limits.
  Only this merged past texture and those bound in an active pass are
  created, as upon each pass the output will be copied to the past texture,
  and bound textures reused in the next pass.
  If not merging, all state is as output by its pass in its own one of the
  arrays of textures.
  The default merged texture is laid out as `[texture, step]` on the
  `[x, y]` axes, respectively; if other layouts are needed, the merge
  texture can be given here to be used as-is, and the merging/copying and
  lookup logic in their respective hooks. See `getStep` and `macroTaps`.
  If a merge texture is given, size information is interpreted in a similar
  way and precedence as it is from `state`. See `getWidth` and `getHeight`.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>width</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Merged data width, aliases follow in
  order of precedence. See `state`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>w</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Alias of `state.merge.width`. See `state`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Alias of `state.merge.width`. See `state`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>height</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Merged data height, aliases follow in
  order of precedence. See `state`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>h</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Alias of `state.merge.height`. See `state`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Alias of `state.merge.height`. See `state`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>shape</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Merged data size. See `state`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>size</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Merged data size. See `state`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>side</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Merged data size of width/height.
  See `state`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>0</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Alias of `state.merge.width` (index 0).
  See `state`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>1</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Alias of `state.merge.height` (index 1).
  See `state`.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>scale</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Merged data size of width/height as a
  square power-of-two size, 2 raised to this power. See `state`.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>to</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    state
                
                </td>
            

            <td class="description last">The state object to set up. Modifies the given
  `state` object by default.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="state.js.html">state.js</a>, <a href="state.js.html#line326">line 326</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>texture</li>
        
            <li>framebuffer</li>
        
            <li><a href="module-maps.html#.mapGroups">module:maps.mapGroups</a></li>
        
            <li><a href="module-maps.html#.mapSamples">module:maps.mapSamples</a></li>
        
            <li><a href="module-step.html#.getStep">module:step.getStep</a></li>
        
            <li><a href="module-macros.html#.macroSamples">module:macros.macroSamples</a></li>
        
            <li><a href="module-macros.html#.macroTaps">module:macros.macroTaps</a></li>
        
            <li><a href="module-macros.html#.macroPass">module:macros.macroPass</a></li>
        
            <li><a href="module-size.html#.getWidth">module:size.getWidth</a></li>
        
            <li><a href="module-size.html#.getHeight">module:size.getHeight</a></li>
        
            <li><a href="module-size.html#.getScaled">module:size.getScaled</a></li>
        
            <li><a href="https://stackoverflow.com/a/60110986/716898">https://stackoverflow.com/a/60110986/716898</a></li>
        
            <li><a href="https://github.com/WebGLSamples/WebGL2Samples/blob/master/samples/texture_2d_array.html">https://github.com/WebGLSamples/WebGL2Samples/blob/master/samples/texture_2d_array.html</a></li>
        
            <li><a href="https://github.com/WebGLSamples/WebGL2Samples/blob/master/samples/texture_3d.html">https://github.com/WebGLSamples/WebGL2Samples/blob/master/samples/texture_3d.html</a></li>
        </ul>
    </dd>
    

    
</dl>















<h5>Returns:</h5>
<ul>
        <li>
<div class="param-desc">
    `to` The state object, set up with the data resources and
  meta information, for use with `getStep` and drawing:
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.maps` Any given
  `state.maps`. See `mapGroups`.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object.&lt;number, array.&lt;number, array.&lt;number>>></span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.textures` Textures per step, as arrays of objects of `texture`s and
  meta info. See `to.maps.textures`.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">array.&lt;array.&lt;object.&lt;texture, string, number, array.&lt;number>>>></span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.passes` Passes per step, as arrays of objects of `framebuffer`s,
  referencing `to.textures`, and meta info. See `to.maps.passes`.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">array.&lt;array.&lt;object.&lt;framebuffer, number, array.&lt;number>>>></span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.steps`
  Hierarchy of steps of state, as an array of `framebuffer`s from
  `to.passes`, with arrays of `texture`s from `to.textures`, and meta
  information; set up here, or the given `state.steps` if it's an array.
  State data may be drawn into the framebuffers accordingly.
  See `mapGroups` and `getStep`.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">array.&lt;framebuffer.&lt;array.&lt;texture>>></span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.merge`
  Any created object of a merged `texture` and meta info, or the given
  `state.merge` as-is if not handled here. See `getStep` and `macroTaps`.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">undefined</span>
|

<span class="param-type">*</span>
|

<span class="param-type">object.&lt;texture, string, number, array.&lt;number>></span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size` Size/type information of the created resources.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.type` Data type of `framebuffer`s and `texture`s.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.depth` Whether `framebuffer`s attach depth.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.stencil` Whether `framebuffer`s attach stencil.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.channelsMin` Minimum channels in any `texture`.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.steps` Number of `to.steps` in the main flow.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.passes` Number of `to.passes` in `to.steps`.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.framebuffers` Number of `framebuffer`s created.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.textures` Number of `to.textures` in `to.passes`.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.colors` Number of `texture`s created.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.width` Width of `framebuffer`s and `texture`s.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.height` Height of `framebuffer`s and `texture`s.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.shape` Shape of `framebuffer`s and
  `texture`s, as `[to.size.width, to.size.height]`.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">array.&lt;number></span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.count` Number of entries in each `texture`.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.size.merge`
  Size/type information about any created or given merge texture.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">undefined</span>
|

<span class="param-type">object.&lt;number, string, array.&lt;number>></span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.stepNow` The currently active state step, as given.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    `to.passNow` The currently active draw pass, as given.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>
</li>
    </ul>




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const api = {
    framebuffer: ({ depth, stencil, width, height, color }) => null,
    texture: ({ type, min, mag, wrap, width, height, channels }) => null
  };

  // Example with `webgl_draw_buffers` extension support, for 4 buffers.
  let maps = mapGroups({ values: [1, 2, 3], buffersMax: 4, packed: 0 });
  let state = { steps: 2, side: 10, maps };

  const s0 = getState(api, state, {}); // =>
  {
    ...state, passNow: undefined, stepNow: undefined,
    size: {
      steps: 2, passes: 2, textures: 4,
      width: 10, height: 10, shape: [10, 10], count: 100
    },
    steps: [[s0.passes[0][0].framebuffer], [s0.passes[1][0].framebuffer]],
    // This setup results in fewer passes, as more buffers can be bound.
    passes: [
      [
        {
          framebuffer: api.framebuffer(s0.passes[0][0]),
          color: [s0.textures[0][0].texture, s0.textures[0][1].texture],
          map: [0, 1], // maps.passes[0]
          entry: 0, index: 0, step: 0,
          depth: false, stencil: false, width: 10, height: 10
        }
      ],
      [
        {
          framebuffer: api.framebuffer(s0.passes[1][0]),
          color: [s0.textures[1][0].texture, s0.textures[1][1].texture],
          map: [0, 1], // maps.passes[0]
          entry: 1, index: 0, step: 1,
          depth: false, stencil: false, width: 10, height: 10
        }
      ]
    ],
    textures: [
      [
        {
          texture: api.texture(s0.textures[0][0]),
          map: [0, 1], // maps.textures[0]
          entry: 0, index: 0, step: 0, pass: 0,
          type: 'float', width: 10, height: 10, channels: 4,
          min: 'nearest', mag: 'nearest', wrap: 'clamp'
        },
        {
          texture: api.texture(s0.textures[0][1]),
          map: [2], // maps.textures[1]
          entry: 1, index: 1, step: 0, pass: 0,
          type: 'float', width: 10, height: 10, channels: 4,
          min: 'nearest', mag: 'nearest', wrap: 'clamp'
        }
      ],
      [
        {
          texture: api.texture(s0.textures[1][0]),
          map: [0, 1], // maps.textures[0]
          entry: 2, index: 0, step: 1, pass: 0,
          type: 'float', width: 10, height: 10, channels: 4,
          min: 'nearest', mag: 'nearest', wrap: 'clamp'
        },
        {
          texture: api.texture(s0.textures[1][1]),
          map: [2], // maps.textures[1]
          entry: 3, index: 1, step: 1, pass: 0,
          type: 'float', width: 10, height: 10, channels: 4,
          min: 'nearest', mag: 'nearest', wrap: 'clamp'
        }
      ]
    ]
  };

  // Example with no `webgl_draw_buffers` extension support, only 1 buffer.
  maps = mapGroups({ values: [1, 2, 3], buffersMax: 1, packed: 0 });
  state = { type: 'uint8', steps: 2, scale: 5, maps, stepNow: 1 };

  const s1 = getState(api, state, {}); // =>
  {
    ...state, passNow: undefined, stepNow: 1,
    size: {
      steps: 2, passes: 4, textures: 4,
      width: 32, height: 32, shape: [32, 32], count: 1024
    },
    steps: [
      [s1.passes[0][0].framebuffer, s1.passes[0][1].framebuffer],
      [s1.passes[1][0].framebuffer, s1.passes[1][1].framebuffer]
    ],
    // This setup results in more passes, as fewer buffers can be bound.
    passes: [
      [
        {
          framebuffer: api.framebuffer(s1.passes[0][0]),
          color: [s1.textures[0][0].texture],
          map: [0], // maps.passes[0]
          entry: 0, index: 0, step: 0,
          depth: false, stencil: false, width: 32, height: 32
        },
        {
          framebuffer: api.framebuffer(s1.passes[0][1]),
          color: [s1.textures[0][1].texture],
          map: [1], // maps.passes[1]
          entry: 1, index: 1, step: 0,
          depth: false, stencil: false, width: 32, height: 32
        }
      ],
      [
        {
          framebuffer: api.framebuffer(s1.passes[1][0]),
          color: [s1.textures[1][0].texture],
          map: [0], // maps.passes[0]
          entry: 2, index: 0, step: 1,
          depth: false, stencil: false, width: 32, height: 32
        },
        {
          framebuffer: api.framebuffer(s1.passes[1][1]),
          color: [s1.textures[1][1].texture],
          map: [1], // maps.passes[1]
          entry: 3, index: 1, step: 1,
          depth: false, stencil: false, width: 32, height: 32
        }
      ]
    ],
    textures: [
      [
        {
          texture: api.texture(s1.textures[0][0]),
          map: [0, 1], // maps.textures[0]
          entry: 0, index: 0, step: 0, pass: 0,
          type: 'uint8', width: 32, height: 32, channels: 4,
          min: 'nearest', mag: 'nearest', wrap: 'clamp'
        },
        {
          texture: api.texture(s1.textures[0][1]),
          map: [2], // maps.textures[1]
          entry: 1, index: 1, step: 0, pass: 1,
          type: 'uint8', width: 32, height: 32, channels: 4,
          min: 'nearest', mag: 'nearest', wrap: 'clamp'
        }
      ],
      [
        {
          texture: api.texture(s1.textures[1][0]),
          map: [0, 1], // maps.textures[0]
          entry: 2, index: 0, step: 1, pass: 0,
          type: 'uint8', width: 32, height: 32, channels: 4,
          min: 'nearest', mag: 'nearest', wrap: 'clamp'
        },
        {
          texture: api.texture(s1.textures[1][1]),
          map: [2], // maps.textures[1]
          entry: 3, index: 1, step: 1, pass: 1,
          type: 'uint8', width: 32, height: 32, channels: 4,
          min: 'nearest', mag: 'nearest', wrap: 'clamp'
        }
      ]
    ]
  };</code></pre>



        
    

    
        <h3 class="subsection-title">Type Definitions</h3>

        
                

    

    
    <h4 class="name" id="~framebuffer"><span class="type-signature"></span>framebuffer<span class="signature">(depth, stencil, width, height, color)</span><span class="type-signature"> &rarr; {*}</span></h4>
    

    



<div class="description">
    Function to create a GL framebuffer; from a GL API.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>depth</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stencil</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>width</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>height</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>color</code></td>
            

            <td class="type">
            
                
<span class="param-type">array.&lt;texture></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="state.js.html">state.js</a>, <a href="state.js.html#line519">line 519</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A GL framebuffer, or an object serving that purpose.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">*</span>


    </dd>
</dl>

    





            
                

    

    
    <h4 class="name" id="~texture"><span class="type-signature"></span>texture<span class="signature">(type, min, mag, wrap, width, height, channels)</span><span class="type-signature"> &rarr; {*}</span></h4>
    

    



<div class="description">
    Function to create a GL texture; from a GL API.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>min</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>mag</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>wrap</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>width</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>height</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>channels</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="state.js.html">state.js</a>, <a href="state.js.html#line503">line 503</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A GL texture, or an object serving that purpose.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">*</span>


    </dd>
</dl>

    





            
    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-const.html">const</a></li><li><a href="module-gl-gpgpu.html">gl-gpgpu</a></li><li><a href="module-index-forms.html">index-forms</a></li><li><a href="module-index-forms_index-entries.html">index-forms/index-entries</a></li><li><a href="module-index-forms_index-states.html">index-forms/index-states</a></li><li><a href="module-inputs.html">inputs</a></li><li><a href="module-lookup_index-uv.html">lookup/index-uv</a></li><li><a href="module-lookup_offset-uv.html">lookup/offset-uv</a></li><li><a href="module-macros.html">macros</a></li><li><a href="module-maps.html">maps</a></li><li><a href="module-size.html">size</a></li><li><a href="module-state.html">state</a></li><li><a href="module-step.html">step</a></li><li><a href="module-util_remain-div.html">util/remain-div</a></li><li><a href="module-vert.html">vert</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Wed Sep 07 2022 17:43:32 GMT+0100 (British Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>